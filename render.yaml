services:
  - type: web
    name: forusbots
    env: docker
    plan: starter
    autoDeploy: true
    dockerfilePath: ./Dockerfile

    healthCheckPath: /health
    healthCheckTimeout: 100

    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000

      # üîê Secrets (define los valores en el Dashboard de Render)
      - key: SHARED_TOKEN
        sync: false
      - key: SITE_USER
        sync: false
      - key: SITE_PASS
        sync: false
      - key: TOTP_SECRET
        sync: false

      # ‚è±Ô∏è OTP / Concurrencia / Estimaciones
      - key: TOTP_STEP_SECONDS
        value: 30
      - key: MAX_CONCURRENCY
        value: 3
      - key: ESTIMATE_AVG_SECONDS
        value: 120
      - key: ESTIMATE_AVG_WINDOW
        value: 10

      # üì∏ Evidencias (temporal, no persistente)
      - key: EVIDENCE_DIR
        value: /tmp/evidence

      # üñ•Ô∏è Headless (tiene prioridad sobre HEADFUL)
      - key: HEADLESS
        value: 1

      # üç™ Reuso de sesi√≥n (Playwright storageState)
      - key: SESSION_REUSE
        value: 1
      - key: SESSIONS_DIR
        value: /data/sessions
      - key: SESSION_TTL_HOURS
        value: 24

    # üíæ Disco persistente para sessions (sobrevive deploys/restarts)
    disks:
      - name: data
        mountPath: /data
        sizeGB: 1
